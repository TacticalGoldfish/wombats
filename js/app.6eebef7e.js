(function(){"use strict";var e={3076:function(e,t,n){var l=n(144),s=n(998),i=n(9582),r=n(9223),o=n(2928),a=n(535),c=n(5157),u=n(8754),d=n(8491),m=function(){var e=this,t=e._self._c;return t(s.Z,[t(o.Z,[t(a.Z,{model:{value:e.selectedStep,callback:function(t){e.selectedStep=t},expression:"selectedStep"}},[t(u.Rp,[e._l(e.modules,(function(n,l){return[l>0?t(r.Z,{key:n.id}):e._e(),t(d.Z,{key:`${n.id}-step`,attrs:{complete:e.selectedStep>n.id,step:n.id,editable:""}},[e._v(" "+e._s(n.title)+" ")])]}))],2),t(u.gd,e._l(e.modules,(function(n){return t(c.Z,{key:`${n.id}-content`,attrs:{step:n.id}},[t(i.Z,{staticClass:"mb-12"},[t("dynamic-entry-list",{ref:`${n.shortcut}-module`,refInFor:!0,attrs:{module:n},on:{switchModule:(t,n)=>e.switchModule(t,n)}})],1)],1)})),1)],1)],1)],1)},h=[],y=n(4127),p=n(266),f=n(2150),g=n(255),x=n(2348),v=n(400),w=n(1214),$=n(1713),_=n(5939),b=n(7808),k=function(){var e=this,t=e._self._c;return t(f.Z,[t($.Z,{staticClass:"text-center"},[t(p.Z,{attrs:{cols:"12",lg:"3",sm:"6"}},[e.module.searchBar?t(b.Z,{attrs:{"hide-details":"",label:"search...",outlined:"",dense:""},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}):e._e()],1),t(p.Z,{attrs:{cols:"12",lg:"3",sm:"6"}},[e.module.filters&&e.module.filters.some((e=>"type"==e))?t(_.Z,{attrs:{items:e.types,multiple:"",chips:"",dense:"",label:"types...",outlined:""},scopedSlots:e._u([{key:"selection",fn:function({item:n}){return[t(y.Z,{attrs:{small:""}},[e._v(e._s(n))])]}}],null,!1,3463412887),model:{value:e.selectedTypes,callback:function(t){e.selectedTypes=t},expression:"selectedTypes"}}):e._e()],1),t(p.Z,{attrs:{cols:"12"}},[e.module&&e.entries?t(w.Z,{attrs:{value:"id"},model:{value:e.selectedEntry,callback:function(t){e.selectedEntry=t},expression:"selectedEntry"}},e._l(e.filteredEntries,(function(n,l){return t(g.Z,{key:`c-${l}`},[t(v.Z,[t("span",{staticStyle:{"font-weight":"bold","font-size":"20px"}},[e._v(e._s(n.type?`${n.type} - `:"")+" "+e._s(n.name)+" "+e._s(n.alias&&""!=n.alias?`(${n.alias})`:""))])]),t(x.Z,[e._l(n.children,(function(n,l){return[t("DynamicElement",{key:`${n.type}-element-${l}-layer-0`,attrs:{element:n,layer:1},on:{openDetails:(t,n)=>e.openDetails(t,n)}})]}))],2)],1)})),1):e._e()],1)],1)],1)},S=[];n(7658);function Z(e){let t=e.split("{{"),n=[];return t.forEach((e=>{if(e.includes("}}")){const t=e.split("}}");if(t[0].includes("<br />"))n.push({type:"nl"});else{const e=t[0].split("|");n.push({type:"a",text:e[0],module:e[1],id:e[2]})}n.push({type:"span",text:t[1]})}else n.push({type:"span",text:e})})),n}var E=n(5495),D=function(){var e=this,t=e._self._c;return"span"==e.element.type?t("span",{class:e.element.class?e.element.class:"",style:e.element.style?e.element.style:""},[e._v(e._s(e.element.text))]):"anchor"==e.element.type&&e.element.targetModule?t("a",{class:e.element.class?e.element.class:"",style:e.element.style?e.element.style:"",on:{click:function(t){return t.preventDefault(),e.openDetails(e.element.targetModule,e.element.targetId)}}},[e._v(e._s(e.element.text))]):"anchor"==e.element.type&&e.element.href?t("a",{class:e.element.class?e.element.class:"",style:e.element.style?e.element.style:"",attrs:{href:e.element.href,target:"_blank"}},[e._v(e._s(e.element.text))]):"row"==e.element.type?t($.Z,{class:e.element.class?e.element.class:"",style:e.element.style?e.element.style:""},[e._v(" "+e._s(e.element.text?e.element.text:"")+" "),e._l(e.element.children,(function(n,l){return t("DynamicElement",{key:`${n.type}-element-${l}-layer-${e.layer}`,attrs:{element:n,layer:e.layer+1},on:{openDetails:(t,n)=>e.openDetails(t,n)}})}))],2):"column"==e.element.type?t(p.Z,{class:e.element.class?e.element.class:"",style:e.element.style?e.element.style:"",attrs:{lg:e.element.colslg,md:e.element.colsmd,sm:e.element.colssm,xs:e.element.colsxs,cols:e.element.cols}},[e._v(" "+e._s(e.element.text?e.element.text:"")+" "),e._l(e.element.children,(function(n,l){return t("DynamicElement",{key:`${n.type}-element-${l}-layer-${e.layer}`,attrs:{element:n,layer:e.layer+1},on:{openDetails:(t,n)=>e.openDetails(t,n)}})}))],2):"newLine"==e.element.type?t("br"):"image"==e.element.type?t(E.Z,{attrs:{src:`./img/${e.element.source}`,height:e.element.height,contain:!!e.element.contain&&e.element.contain}}):"map"==e.element.type&&e.element.xyGrid&&2==e.element.xyGrid.length?t("div",{ref:"container",staticStyle:{"justify-content":"center",display:"flex"},style:{height:"100%",width:"100%"}},[t("Konva-stage",{ref:"stage",attrs:{config:e.stageSize}},[t("Konva-layer",{ref:"gridLayer"},[t("Konva-image",{attrs:{config:e.imageConfig,src:`./img/${e.element.source}`,height:e.element.height,contain:!!e.element.contain&&e.element.contain}}),[e._l(e.element.xyGrid[0]+1,(function(n){return t("Konva-line",{key:`element-${e.element.type}-layer-${e.layer}-vert-${n}`,attrs:{config:{points:[e.stageSize.width/e.element.xyGrid[0]*n,0,e.stageSize.width/e.element.xyGrid[0]*n,e.stageSize.height],strokeWidth:2,stroke:`${e.element.xyGridColor}`}}})})),e._l(e.element.xyGrid[1]+1,(function(n){return t("Konva-line",{key:`element-${e.element.type}-layer-${e.layer}-horiz-${n}`,attrs:{config:{points:[0,e.stageSize.height/e.element.xyGrid[1]*n,e.stageSize.width,e.stageSize.height/e.element.xyGrid[1]*n],strokeWidth:2,stroke:`${e.element.xyGridColor}`}}})}))],e.element.pins?e._l(e.element.pins,(function(n,l){return t("Konva-label",{key:`element-${e.element.type}-layer-${e.layer}-pin-${l}`,attrs:{config:{x:e.stageSize.width/e.element.xyGrid[0]*n.x,y:e.stageSize.height/e.element.xyGrid[1]*n.y,opacity:.75}},on:{pointerclick:function(t){return e.openDetails(n.targetModule,n.targetId)},mouseenter:e.handleMouseEnter,mouseleave:e.handleMouseLeave}},[t("Konva-tag",{attrs:{config:{fill:"black",pointerDirection:"down",pointerWidth:10,pointerHeight:10,lineJoin:"round",shadowColor:"black",shadowBlur:10,shadowOffset:10,shadowOpacity:.5}}}),t("Konva-text",{attrs:{config:{text:n.text,fontFamily:"Calibri",fontSize:18,padding:5,fill:"white"}}})],1)})):e._e(),e.element.polygons?e._l(e.element.polygons,(function(n,l){return t("Konva-line",{key:`element-${e.element.type}-layer-${e.layer}-polygon-${l}`,attrs:{config:{points:e.calculatePolygonPoints(n),strokeWidth:1,stroke:`${n.strokeColor}`,closed:!0,x:0,y:0,fill:n.fillColor}}})})):e._e()],2)],1)],1):e._e()},T=[];const z=window.innerWidth,C=window.innerHeight;var O={name:"DynamicElement",components:{DynamicElement:L},data:()=>({selectedCharacter:null,stageSize:{width:z,height:C},image:null}),computed:{imageConfig(){return{image:this.image}}},props:{element:{type:Object,default:()=>{}},layer:{type:Number,default:0}},created:function(){window.addEventListener("resize",this.changeRect)},watch:{element:{immediate:!0,handler(e){e&&"map"==e.type&&this.changeRect()}}},methods:{unpackDescription(e){const t=Z(e);return t},openDetails(e,t){this.$emit("openDetails",e,t)},async changeRect(){await this.$nextTick();const e=this.$refs.container;if(!e)return;const t=new window.Image;t.src=`./img/${this.element.source}`,t.onload=()=>{const n=e.offsetParent.offsetWidth/t.width,l=t.height*n,s=e.offsetWidth;t.width=s,t.height=l,this.stageSize.width=s,this.stageSize.height=l,this.image=t}},handleMouseEnter(e){const t=e.target.getStage();t.container().style.cursor="pointer"},handleMouseLeave(e){const t=e.target.getStage();t.container().style.cursor="default"},calculatePolygonPoints(e){const t=this.stageSize.width,n=this.stageSize.height,l=t/this.element.xyGrid[0],s=n/this.element.xyGrid[1];let i=[];return e.points.forEach(((e,t)=>{t%2?i.push(e*s):i.push(e*l)})),i}}},j=O,M=n(1001),G=(0,M.Z)(j,D,T,!1,null,null,null),L=G.exports,K={name:"DynamicEntryList",components:{DynamicElement:L},data:()=>({selectedEntry:null,entries:[],searchText:"",selectedTypes:[]}),props:{module:{type:Object,default:()=>{}}},watch:{module:{immediate:!0,handler(e){e&&("string"==typeof this.module.entries?this.fetchEntryJson().then((t=>{e.searchBar&&t.forEach((e=>{e.allText=this.getAllText(e)})),this.entries=t})):"object"==typeof this.module.entries&&(this.entries=[...this.module.entries]))}}},computed:{filteredEntries(){const e=this.searchText.toLowerCase();return this.entries.filter((t=>(0==this.selectedTypes.length||this.selectedTypes.some((e=>e==t.type)))&&(t.type?.toLowerCase().includes(e)||t.name?.toLowerCase().includes(e)||t.alias?.toLowerCase().includes(e)||t.allText?.toLowerCase().includes(e))))},types(){let e=[];return this.entries.forEach((t=>{-1==e.indexOf(t.type)&&e.push(t.type)})),e}},methods:{unpackDescription(e){const t=Z(e);return t},openDetails(e,t){if(e==this.module.shortcut){this.searchText="",console.log(this.module);const e=this.entries.findIndex((e=>e.id==t));this.selectedEntry=e}else this.$emit("switchModule",e,t)},async fetchEntryJson(){const e=await fetch(`/${this.module.entries}`),t=await e.json();return t},getAllText(e){let t="";return e?.children?.forEach((e=>{t+=e.text?` ${e.text}`:"",null!=e.children&&(t+=` ${this.getAllText(e)}`)})),t}}},P=K,W=(0,M.Z)(P,k,S,!1,null,null,null),I=W.exports,A={name:"App",components:{DynamicEntryList:I},created(){this.init()},data:()=>({selectedStep:1,selectedModule:1}),computed:{modules(){return this.$modules?this.$modules.filter((e=>1!=e.hidden)):[]}},watch:{},methods:{init(){this.$vuetify.theme.dark=!0},switchModule(e,t){const n=this.modules.find((t=>t.shortcut==e));n&&this.$refs[`${e}-module`]&&this.$refs[`${e}-module`][0]&&(this.selectedStep=n.id,this.$refs[`${e}-module`][0].openDetails(e,t))}}},R=A,B=(0,M.Z)(R,m,h,!1,null,null,null),F=B.exports,J=n(1705);l["default"].use(J.Z);var H=new J.Z({}),N=n(6168),q=n.n(N);l["default"].config.productionTip=!1,l["default"].use(q(),{prefix:"Konva"}),fetch("/modules.json").then((e=>e.json())).then((e=>{l["default"].prototype.$modules=e,new l["default"]({vuetify:H,render:e=>e(F)}).$mount("#app")}))}},t={};function n(l){var s=t[l];if(void 0!==s)return s.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,l,s,i){if(!l){var r=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],i=e[u][2];for(var o=!0,a=0;a<l.length;a++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](l[a])}))?l.splice(a--,1):(o=!1,i<r&&(r=i));if(o){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[l,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,i,r=l[0],o=l[1],a=l[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(a)var u=a(n)}for(t&&t(l);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},l=self["webpackChunkdnd_organizer"]=self["webpackChunkdnd_organizer"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[998],(function(){return n(3076)}));l=n.O(l)})();
//# sourceMappingURL=app.6eebef7e.js.map